@model  SistemaGestion.Models.Cuenta
<div class="modal-dialog" role="document">


    <div class="modal-content">
        <div class="row">
            <div class="col-sm-12">
                <div class="card border-secondary">
                    <div class="card-header bg-secondary text-white">
                        Mantenedor Cuentas Contables
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    @using (Html.BeginForm("AggCuentaContable", "MantenedorCuentas", FormMethod.Post, new { id = "fromRegistro", role = "form" }))
                    {
                        <div class="card-body p-2">


                            <form>
                                <div class="form-row">

                                    <div class="form-group col-md-6">
                                        <label for="inputPassword4">Numero de Cuenta</label>
                                        @Html.TextBoxFor(x => x.NumeroCuenta, new { @class = "form-control form-control-sm model", @placeholder = "Numero Cuenta" })

                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputAddress">Descripcion</label>
                                    @Html.TextBoxFor(x => x.Descripcion, new { @class = "form-control form-control-sm model", @placeholder = "Descripcion" })
                                    @*<input type="text" class="form-control" id="Des">*@
                                </div>


                                <button type="submit" class="btn btn-success" id="Registrar">Registrar</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                            </form>



                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
    <script>
     $(function () {
         $("#Registrar").click(function () {
                event.preventDefault();
                var result = confirm("Desea Agregar esta nueva Cuenta?");
                if (result) {
                    $('#cargal').modal('show');
                    var url = "@Url.Action("AggCuentaContable", "MantenedorCuentas")";
                    var manejarErrorAjax = "Eror";
                    var parametros = $("#fromRegistro").serialize();
                    $.post(url, parametros).done(function (res) {
                        if (res.error == false) {

                            setTimeout(carga, 3000);
                            setTimeout(mostrarMensaje, 4000);
                            setTimeout(bajaModal, 6000);
                            bajarModalEdit();
                            setTimeout(MostrarLista,7000);

                            //setTimeout(bajarModalConciliacion, 8000);
                            function carga() {
                                $("#cargal").modal('hide');
                                //$("#cargarMensajes").modal('show');
                                //$('#mensajeLoad').html(r.respuesta);
                            };
                            function bajaModal() {

                                $("#cargarMensajes").modal('hide');
                                $("#totales").modal('hide');

                            };

                            function mostrarMensaje() {
                                $("#cargarMensajes").modal('show');
                                $('#mensajeLoad').html(res.respuesta);

                            };


                        } else {

                            setTimeout(carga, 3000);
                            setTimeout(mostrarMensaje, 4000);
                            setTimeout(bajaModal, 6000);


                            function carga() {
                                $("#cargal").modal('hide');
                                //$("#cargarMensajes").modal('show');
                                //$('#mensajeLoad').html(r.respuesta);
                            };
                            function bajaModal() {

                                $("#cargarMensajes").modal('hide');

                            };

                            function mostrarMensaje() {
                                $("#cargarMensajes").modal('show');
                                $('#mensajeLoad').html(res.respuesta);

                            };

                        }
                        //$('.modal-backdrop').remove();

                    }).fail(manejarErrorAjax);

                }
            });

     })
       function MostrarLista() {

           document.location.href = "@Url.Content("~/MantenedorCuentas/Index")";

    }

    </script>
</div>
